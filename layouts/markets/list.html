{{ define "main" }}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <!-- Market Overview -->
    <div class="mt-8 mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mt-8 mb-8">Global Markets Overview</h1>
        <!-- Major Indices Widget -->
        <div class="bg-white rounded-lg shadow-sm p-6 h-[600px] mb-8">
            <div class="tradingview-widget-container h-full">
                <div class="tradingview-widget-container__widget h-full"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                {{ $.Site.Data.market_overview | jsonify | safeJS }}
                </script>
            </div>
        </div>

        <!-- Market Details Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Commodities Overview -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Commodities</h2>
                <div class="space-y-4">
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Precious Metals</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Track gold, silver, and platinum prices - traditional safe-haven assets
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Energy</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Monitor crude oil and natural gas - key indicators of global economic activity
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Agriculture & Metals</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Follow industrial metals and agricultural commodities - essential raw materials
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bonds Overview -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Government Bonds</h2>
                <div class="space-y-4">
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">US Treasury Yields</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Track US government bond yields across different maturities (2Y-30Y)
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">European Bonds</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Monitor European sovereign debt - German Bunds, Italian BTPs
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Asian Markets</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Follow Asian bond markets, including Japanese government bonds
                        </div>
                    </div>
                </div>
            </div>

            <!-- Forex Overview -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Foreign Exchange</h2>
                <div class="space-y-4">
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Major Pairs</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Track EUR/USD and GBP/USD - the world's most traded currency pairs
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Asian & Pacific</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Monitor USD/JPY and major Asian currency movements
                        </div>
                    </div>
                    <div class="group">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span class="text-gray-600 font-medium">Commodity FX</span>
                            <span class="text-sm text-blue-600">View Charts →</span>
                        </div>
                        <div class="mt-2 text-sm text-gray-500">
                            Follow AUD/USD, USD/CAD - currencies linked to commodity prices
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Stats -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Market Statistics</h2>
            <div class="space-y-8">
                <div class="flex justify-between items-start">
                    <span class="text-gray-600">Trading Volume</span>
                    <div class="tradingview-widget-container">
                        <div class="tradingview-widget-container__widget h-[400px]"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                        {{ $.Site.Data.widgets.technical_analysis | jsonify | safeJS }}
                        </script>
                    </div>
                </div>
                <div class="flex justify-between items-start">
                    <span class="text-gray-600">Market Breadth</span>
                    <div class="tradingview-widget-container">
                        <div class="tradingview-widget-container__widget h-[400px]"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
                        {{ $.Site.Data.widgets.symbol_overview | jsonify | safeJS }}
                        </script>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Sectors Table -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Market Sectors Overview</h2>
        <div class="bg-white rounded-lg shadow-sm p-6 h-[500px] mb-8 flex flex-col justify-between">
            <div class="tradingview-widget-container h-full">
                <div class="tradingview-widget-container__widget h-full"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js" async>
                {{ $.Site.Data.widgets.market_quotes | jsonify | safeJS }}
                </script>
            </div>
        </div>

        <!-- Stock Market Sector Performance -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Stock Market Sector Performance</h2>
        <div class="bg-white rounded-lg shadow-sm p-6 h-[600px] mb-8">
            <div class="tradingview-widget-container h-full">
                <div class="tradingview-widget-container__widget h-full"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js" async>
                {{ $.Site.Data.widgets.screener | jsonify | safeJS }}
                </script>
            </div>
        </div>

        <!-- Economic Calendar -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Economic Calendar</h2>
        <div class="bg-white rounded-lg shadow-sm p-6 h-[600px]">
            <div class="tradingview-widget-container h-full">
                <div class="tradingview-widget-container__widget h-full"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
                {{ $.Site.Data.widgets.events | jsonify | safeJS }}
                </script>
            </div>
        </div>
    </div>
</div>

<!-- Add JavaScript for chart links -->
<script>
document.querySelectorAll('.group').forEach(group => {
    group.addEventListener('click', function() {
        const category = this.querySelector('.text-gray-600').textContent;
        let symbols = [];
        
        // Define symbols for each category
        const symbolMap = {
            'Precious Metals': ['XAUUSD', 'XAGUSD', 'XPTUSD'],
            'Energy': ['WTICOUSD', 'BCOUSD', 'NATGASUSD'],
            'Agriculture & Metals': ['XCUUSD', 'CORNUSD'],
            'US Treasury Yields': ['DGS2', 'DGS5', 'DGS10', 'DGS30'],
            'European Bonds': ['BDGR10Y', 'ITGR10Y'],
            'Asian Markets': ['JPGR10Y'],
            'Major Pairs': ['EURUSD', 'GBPUSD'],
            'Asian & Pacific': ['USDJPY'],
            'Commodity FX': ['AUDUSD', 'USDCAD']
        };
        
        symbols = symbolMap[category] || [];
        if (symbols.length > 0) {
            window.open(`https://www.tradingview.com/chart/?symbol=${symbols[0]}`, '_blank');
        } else {
            alert("Chart not available for this category.");
        }
    });
});
</script>
{{ end }} 